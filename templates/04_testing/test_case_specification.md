# テストケース仕様書

## ドキュメント情報

- **作成日**: YYYY-MM-DD
- **最終更新日**: YYYY-MM-DD
- **バージョン**: 1.0.0
- **作成者**: [あなたの名前]
- **プロジェクト**: [プロジェクト名]
- **ステータス**: Draft

## 目次

- [1. 概要](#1-概要)
- [2. 認証機能のテストケース](#2-認証機能のテストケース)
- [3. ユーザー管理のテストケース](#3-ユーザー管理のテストケース)
- [4. [機能別]のテストケース](#4-機能別のテストケース)
- [5. 非機能テストケース](#5-非機能テストケース)
- [変更履歴](#変更履歴)
- [関連ドキュメント](#関連ドキュメント)

## 1. 概要

### 1.1 目的

このドキュメントは、システムの各機能に対するテストケースを定義します。

### 1.2 テストケースの構成

各テストケースは以下の情報を含みます:

| 項目 | 説明 |
|------|------|
| ID | テストケースの一意な識別子 |
| 優先度 | P1(Critical) / P2(High) / P3(Medium) / P4(Low) |
| テスト項目 | テストする機能・項目 |
| 前提条件 | テスト実行前に満たすべき条件 |
| テスト手順 | 実行する操作の手順 |
| 期待結果 | 期待される動作・出力 |
| 実施者 | テスト実施者 (手動テストの場合) |

## 2. 認証機能のテストケース

### 2.1 ユーザー登録

| ID | TC-AUTH-001 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 有効なデータでユーザー登録 |
| **前提条件** | - データベースが起動している<br>- メールアドレスが未登録 |
| **テスト手順** | 1. `/register` にアクセス<br>2. 有効なメールアドレスを入力 (例: test@example.com)<br>3. 有効なパスワードを入力 (例: Password123!)<br>4. 名前を入力 (例: テスト太郎)<br>5. 利用規約に同意<br>6. 「登録」ボタンをクリック |
| **期待結果** | - 登録が成功する<br>- ダッシュボードにリダイレクトされる<br>- ユーザー名が表示される<br>- データベースにユーザーが作成される |
| **実施者** | 自動 + 手動 |

---

| ID | TC-AUTH-002 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 無効なメールアドレスで登録 |
| **前提条件** | - データベースが起動している |
| **テスト手順** | 1. `/register` にアクセス<br>2. 無効なメールアドレスを入力 (例: invalid-email)<br>3. パスワードを入力<br>4. 名前を入力<br>5. 「登録」ボタンをクリック |
| **期待結果** | - エラーメッセージが表示される<br>- "Invalid email format" または類似のメッセージ<br>- 登録が失敗する<br>- ページは `/register` のまま |
| **実施者** | 自動 |

---

| ID | TC-AUTH-003 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | 短いパスワードで登録 |
| **前提条件** | - データベースが起動している |
| **テスト手順** | 1. `/register` にアクセス<br>2. 有効なメールアドレスを入力<br>3. 8文字未満のパスワードを入力 (例: Pass1!)<br>4. 名前を入力<br>5. 「登録」ボタンをクリック |
| **期待結果** | - エラーメッセージが表示される<br>- "Password must be at least 8 characters" または類似のメッセージ<br>- 登録が失敗する |
| **実施者** | 自動 |

---

| ID | TC-AUTH-004 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 既存のメールアドレスで登録 |
| **前提条件** | - test@example.com が既に登録済み |
| **テスト手順** | 1. `/register` にアクセス<br>2. 既存のメールアドレスを入力 (test@example.com)<br>3. パスワードを入力<br>4. 名前を入力<br>5. 「登録」ボタンをクリック |
| **期待結果** | - エラーメッセージが表示される<br>- "Email already registered" または類似のメッセージ<br>- 登録が失敗する |
| **実施者** | 自動 |

### 2.2 ログイン

| ID | TC-AUTH-101 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 正しい認証情報でログイン |
| **前提条件** | - ユーザーが登録済み (test@example.com / Password123!) |
| **テスト手順** | 1. `/login` にアクセス<br>2. メールアドレスを入力 (test@example.com)<br>3. パスワードを入力 (Password123!)<br>4. 「ログイン」ボタンをクリック |
| **期待結果** | - ログインが成功する<br>- ダッシュボードにリダイレクトされる<br>- ユーザー名が表示される<br>- トークンがローカルストレージに保存される |
| **実施者** | 自動 + 手動 |

---

| ID | TC-AUTH-102 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 誤ったパスワードでログイン |
| **前提条件** | - ユーザーが登録済み |
| **テスト手順** | 1. `/login` にアクセス<br>2. 正しいメールアドレスを入力<br>3. 誤ったパスワードを入力<br>4. 「ログイン」ボタンをクリック |
| **期待結果** | - エラーメッセージが表示される<br>- "Invalid credentials" または類似のメッセージ<br>- ログインが失敗する<br>- ページは `/login` のまま |
| **実施者** | 自動 |

---

| ID | TC-AUTH-103 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | 存在しないユーザーでログイン |
| **前提条件** | - データベースが起動している |
| **テスト手順** | 1. `/login` にアクセス<br>2. 存在しないメールアドレスを入力 (nonexistent@example.com)<br>3. パスワードを入力<br>4. 「ログイン」ボタンをクリック |
| **期待結果** | - エラーメッセージが表示される<br>- "Invalid credentials" (セキュリティのため詳細は表示しない)<br>- ログインが失敗する |
| **実施者** | 自動 |

### 2.3 ログアウト

| ID | TC-AUTH-201 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | ログアウト |
| **前提条件** | - ユーザーがログイン済み |
| **テスト手順** | 1. ダッシュボードにアクセス<br>2. ユーザーメニューを開く<br>3. 「ログアウト」をクリック |
| **期待結果** | - ログアウトが成功する<br>- トップページまたはログインページにリダイレクトされる<br>- トークンがクリアされる<br>- 認証が必要なページにアクセスできなくなる |
| **実施者** | 自動 + 手動 |

### 2.4 認証保護

| ID | TC-AUTH-301 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 未認証でダッシュボードにアクセス |
| **前提条件** | - ユーザーが未ログイン |
| **テスト手順** | 1. 直接 `/dashboard` にアクセス |
| **期待結果** | - アクセスが拒否される<br>- ログインページにリダイレクトされる |
| **実施者** | 自動 |

---

| ID | TC-AUTH-302 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 無効なトークンでAPIアクセス |
| **前提条件** | - APIサーバーが起動している |
| **テスト手順** | 1. 無効なトークンを使用して `/api/users` にGETリクエスト |
| **期待結果** | - 401 Unauthorized が返される<br>- エラーメッセージが返される |
| **実施者** | 自動 |

## 3. ユーザー管理のテストケース

### 3.1 ユーザー一覧取得

| ID | TC-USER-001 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | ユーザー一覧の取得 |
| **前提条件** | - 管理者としてログイン済み<br>- ユーザーが複数登録されている |
| **テスト手順** | 1. `/users` にアクセス |
| **期待結果** | - ユーザー一覧が表示される<br>- ID、名前、メールアドレスが表示される<br>- ページネーションが表示される (20件以上の場合) |
| **実施者** | 手動 |

---

| ID | TC-USER-002 |
|----|------------|
| **優先度** | P3 |
| **テスト項目** | ユーザー検索 |
| **前提条件** | - 管理者としてログイン済み |
| **テスト手順** | 1. `/users` にアクセス<br>2. 検索ボックスに "田中" と入力<br>3. Enter または検索ボタンをクリック |
| **期待結果** | - "田中" を含むユーザーのみが表示される<br>- 名前またはメールアドレスで検索される |
| **実施者** | 手動 |

### 3.2 ユーザー詳細

| ID | TC-USER-101 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | ユーザー詳細の表示 |
| **前提条件** | - ログイン済み<br>- ユーザーが存在する (ID: 123) |
| **テスト手順** | 1. `/users/123` にアクセス |
| **期待結果** | - ユーザー詳細が表示される<br>- 名前、メール、プロフィール情報が表示される<br>- アバター画像が表示される (設定されている場合) |
| **実施者** | 手動 |

---

| ID | TC-USER-102 |
|----|------------|
| **優先度** | P3 |
| **テスト項目** | 存在しないユーザーの詳細 |
| **前提条件** | - ログイン済み |
| **テスト手順** | 1. `/users/99999` にアクセス (存在しないID) |
| **期待結果** | - 404エラーページが表示される<br>- "User not found" または類似のメッセージ |
| **実施者** | 自動 |

### 3.3 ユーザー更新

| ID | TC-USER-201 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | プロフィール編集 |
| **前提条件** | - ユーザーとしてログイン済み |
| **テスト手順** | 1. `/profile` にアクセス<br>2. 名前を変更 (例: "田中花子")<br>3. 自己紹介を入力<br>4. 「保存」ボタンをクリック |
| **期待結果** | - 更新が成功する<br>- 成功メッセージが表示される<br>- 変更内容が反映される<br>- データベースが更新される |
| **実施者** | 手動 |

---

| ID | TC-USER-202 |
|----|------------|
| **優先度** | P3 |
| **テスト項目** | 他人のプロフィール編集の拒否 |
| **前提条件** | - 一般ユーザーとしてログイン済み (ID: 1) |
| **テスト手順** | 1. PUT `/api/users/2` で他人の情報を更新しようとする |
| **期待結果** | - 403 Forbidden が返される<br>- エラーメッセージが返される<br>- データは更新されない |
| **実施者** | 自動 |

### 3.4 ユーザー削除

| ID | TC-USER-301 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | 管理者によるユーザー削除 |
| **前提条件** | - 管理者としてログイン済み<br>- 削除対象ユーザーが存在する |
| **テスト手順** | 1. `/users/123` にアクセス<br>2. 「削除」ボタンをクリック<br>3. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 削除が成功する<br>- ユーザー一覧にリダイレクトされる<br>- 削除されたユーザーが表示されない<br>- データベースから削除される |
| **実施者** | 手動 |

## 4. [機能別]のテストケース

### 4.1 [機能名]

| ID | TC-[PREFIX]-001 |
|----|------------|
| **優先度** | P1/P2/P3 |
| **テスト項目** | [テスト項目名] |
| **前提条件** | [前提条件を記述] |
| **テスト手順** | 1. [手順1]<br>2. [手順2]<br>3. [手順3] |
| **期待結果** | - [期待される結果1]<br>- [期待される結果2] |
| **実施者** | 自動/手動 |

## 5. 非機能テストケース

### 5.1 パフォーマンス

| ID | TC-PERF-001 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | ページ読み込み時間 |
| **前提条件** | - 本番環境またはステージング環境 |
| **テスト手順** | 1. Chrome DevTools の Network タブを開く<br>2. トップページにアクセス<br>3. DOMContentLoaded と Load の時間を確認 |
| **期待結果** | - DOMContentLoaded: 1秒以内<br>- Load: 3秒以内<br>- Lighthouse スコア: 80以上 |
| **実施者** | 手動 |

---

| ID | TC-PERF-002 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | API レスポンスタイム |
| **前提条件** | - APIサーバーが起動している |
| **テスト手順** | 1. GET `/api/users` を実行<br>2. レスポンスタイムを計測 |
| **期待結果** | - レスポンスタイム: 500ms以内 |
| **実施者** | 自動 |

### 5.2 セキュリティ

| ID | TC-SEC-001 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | XSS対策 |
| **前提条件** | - システムが起動している |
| **テスト手順** | 1. 入力フィールドに `<script>alert('XSS')</script>` を入力<br>2. 送信<br>3. 画面に表示される内容を確認 |
| **期待結果** | - スクリプトが実行されない<br>- エスケープされて表示される、または無害化される |
| **実施者** | 手動 |

---

| ID | TC-SEC-002 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | SQLインジェクション対策 |
| **前提条件** | - APIサーバーが起動している |
| **テスト手順** | 1. GET `/api/users?id=1' OR '1'='1` でアクセス<br>2. レスポンスを確認 |
| **期待結果** | - SQLエラーが発生しない<br>- 400 Bad Request または空の結果が返る<br>- すべてのユーザーが返されない |
| **実施者** | 自動 |

---

| ID | TC-SEC-003 |
|----|------------|
| **優先度** | P1 |
| **テスト項目** | HTTPS通信 |
| **前提条件** | - 本番環境 |
| **テスト手順** | 1. http://example.com にアクセス |
| **期待結果** | - https://example.com にリダイレクトされる<br>- すべての通信がHTTPSで行われる |
| **実施者** | 手動 |

### 5.3 ブラウザ互換性

| ID | TC-COMP-001 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | Chrome での動作確認 |
| **前提条件** | - Chrome (最新版) |
| **テスト手順** | 1. 主要なページを巡回<br>2. 主要な機能を実行 |
| **期待結果** | - すべての機能が正常に動作する<br>- レイアウトが崩れていない<br>- コンソールエラーがない |
| **実施者** | 手動 |

---

| ID | TC-COMP-002 |
|----|------------|
| **優先度** | P2 |
| **テスト項目** | Edge での動作確認 |
| **前提条件** | - Edge (最新版) |
| **テスト手順** | 1. 主要なページを巡回<br>2. 主要な機能を実行 |
| **期待結果** | - すべての機能が正常に動作する<br>- レイアウトが崩れていない |
| **実施者** | 手動 |

---

| ID | TC-COMP-003 |
|----|------------|
| **優先度** | P3 |
| **テスト項目** | モバイル (iPhone) での動作確認 |
| **前提条件** | - Chrome DevTools のモバイルエミュレータ |
| **テスト手順** | 1. モバイル表示で主要なページを確認<br>2. タップ操作で機能を実行 |
| **期待結果** | - レスポンシブデザインが正しく表示される<br>- タッチ操作が正常に動作する<br>- ボタンが押しやすい大きさである |
| **実施者** | 手動 |

## 変更履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|-----------|------|--------|----------|
| 1.0.0     | YYYY-MM-DD | [あなたの名前] | 初版作成 |

## 関連ドキュメント

- [テスト計画書](./test_plan.md)
- [要件定義書](../01_planning/requirements_specification.md)
- [テスト結果報告書](./test_report.md)
