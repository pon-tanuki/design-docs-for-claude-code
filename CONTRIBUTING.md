# コントリビューションガイド

このプロジェクトへの貢献に興味を持っていただき、ありがとうございます！
このガイドでは、プロジェクトに貢献する方法を説明します。

## 📋 目次

- [コントリビューションの種類](#コントリビューションの種類)
- [開発環境のセットアップ](#開発環境のセットアップ)
- [テンプレートの追加・修正](#テンプレートの追加修正)
- [プルリクエストの手順](#プルリクエストの手順)
- [コミットメッセージ規約](#コミットメッセージ規約)
- [レビュープロセス](#レビュープロセス)
- [行動規範](#行動規範)

## コントリビューションの種類

以下のような貢献を歓迎します：

### 1. バグ報告

テンプレートの誤字脱字、フォーマットの問題、技術的な誤りを見つけた場合は、[Issue](https://github.com/pon-tanuki/design-docs-for-claude-code/issues)を作成してください。

**バグ報告に含めるべき情報**:
- 問題のあるファイル名とパス
- 現在の内容（問題箇所）
- 期待される内容
- スクリーンショット（該当する場合）

### 2. 機能要望

新しいテンプレートの追加、既存テンプレートの改善案がある場合は、[Issue](https://github.com/pon-tanuki/design-docs-for-claude-code/issues)で提案してください。

**機能要望に含めるべき情報**:
- 提案の背景（なぜ必要か）
- 具体的な内容（何を追加・変更するか）
- 想定される利用シーン

### 3. ドキュメント改善

README.md、各種ガイド、テンプレート自体の改善提案。

### 4. コード貢献

セットアップスクリプト、Claude Code設定、GitHub Actionsの改善。

## 開発環境のセットアップ

### 必要なツール

- Git
- テキストエディタ（VSCode推奨）
- Bash（スクリプト編集の場合）
- ShellCheck（スクリプトリント、オプション）

### リポジトリのクローン

```bash
# リポジトリをフォーク後、クローン
git clone https://github.com/<your-username>/design-docs-for-claude-code.git
cd design-docs-for-claude-code

# アップストリームを追加
git remote add upstream https://github.com/pon-tanuki/design-docs-for-claude-code.git
```

### ローカル確認

```bash
# テンプレートが正しく配置されているか確認
ls -R templates/

# スクリプトが実行可能か確認
bash setup-docs.sh
bash quick-setup.sh
```

## テンプレートの追加・修正

### テンプレート追加のチェックリスト

新しいテンプレートを追加する場合、以下を確認してください：

#### 1. ファイル配置

```bash
# 適切なフェーズディレクトリに配置
templates/
  └── [フェーズ番号]_[フェーズ名]/
      └── [テンプレート名].md
```

**フェーズ**:
- `01_planning` - 計画フェーズ
- `02_design` - 設計フェーズ
- `03_development` - 開発フェーズ
- `04_testing` - テストフェーズ
- `05_operation` - 運用フェーズ
- `06_common` - 共通ドキュメント
- `examples` - 記入例

#### 2. ドキュメント構造

すべてのテンプレートは以下の構造に従う必要があります：

```markdown
# [ドキュメント名] - [プロジェクト名]

## ドキュメント情報

- **作成日**: YYYY-MM-DD
- **最終更新日**: YYYY-MM-DD
- **バージョン**: X.Y.Z
- **作成者**: [名前]
- **プロジェクト**: [プロジェクト名]
- **ステータス**: Draft/In Review/Approved

## 目次

- [1. セクション1](#1-セクション1)
- [2. セクション2](#2-セクション2)

## 1. セクション1

...

## 変更履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|-----------|------|--------|----------|
| 1.0.0     | YYYY-MM-DD | 名前 | 初版作成 |
```

詳細は [`templates/06_common/document_format.md`](templates/06_common/document_format.md) を参照してください。

#### 3. 必須セクション

- ✅ ドキュメント情報（メタデータ）
- ✅ 目次（アンカーリンク付き）
- ✅ 変更履歴テーブル
- ✅ 関連ドキュメントへのリンク（該当する場合）

#### 4. コンテンツガイドライン

**小規模プロジェクト向けを維持**:
- ステークホルダーは「クライアント + 開発者（1-3人）」を想定
- 過度に複雑な企業向けプロセスは避ける
- 実用的で即座に使える内容

**実践的なコード例**:
- TypeScript/JavaScript中心
- コピペで動作するサンプル
- コメント付きで理解しやすく

**Mermaid図の活用**:
```markdown
\`\`\`mermaid
graph LR
    A[開始] --> B[処理]
    B --> C[終了]
\`\`\`
```

#### 5. バリデーション

```bash
# Markdownリント（VSCode拡張機能）
# markdownlint をインストール済みの場合
markdownlint templates/**/*.md

# Mermaid構文チェック
# https://mermaid.live/ で図を確認
```

### テンプレート修正のチェックリスト

既存テンプレートを修正する場合：

- [ ] 「最終更新日」を更新
- [ ] バージョン番号を更新（Semantic Versioning）
  - パッチ（誤字修正等）: 1.0.0 → 1.0.1
  - マイナー（セクション追加等）: 1.0.1 → 1.1.0
  - メジャー（大幅な構造変更）: 1.1.0 → 2.0.0
- [ ] 変更履歴テーブルにエントリを追加
- [ ] 関連ドキュメントも確認（整合性維持）

### セットアップスクリプトの更新

新しいテンプレートを追加した場合、以下のファイルも更新してください：

#### `setup-docs.sh`

```bash
# download_phase 関数に追加
download_phase() {
    local phase=$1
    local phase_name=$2

    case $phase in
        "0X_phase_name")
            download_file "$REPO_URL/templates/0X_phase_name/new_template.md" "$DOCS_DIR/0X_phase_name/new_template.md" "新テンプレート"
            ;;
    esac
}
```

#### `quick-setup.sh`

```bash
# download_フェーズ名 関数に追加
download_phase_name() {
    echo "📝 フェーズ名のテンプレートをダウンロード..."
    download "$REPO_URL/templates/0X_phase_name/new_template.md" "$DOCS_DIR/0X_phase_name/new_template.md"
}
```

#### `README.md`

- テンプレート数のバッジを更新
- テンプレート一覧セクションに追加
- ディレクトリ構成を更新（該当する場合）

## プルリクエストの手順

### 1. ブランチ作成

```bash
# 最新のmainブランチを取得
git checkout main
git pull upstream main

# フィーチャーブランチを作成
git checkout -b feature/add-deployment-guide

# または修正の場合
git checkout -b fix/typo-in-api-spec
```

**ブランチ命名規則**:
- `feature/*` - 新機能追加
- `fix/*` - バグ修正
- `docs/*` - ドキュメント改善
- `refactor/*` - リファクタリング

### 2. 変更を加える

```bash
# ファイルを編集
vim templates/05_operation/deployment_guide.md

# 変更を確認
git diff

# ステージング
git add templates/05_operation/deployment_guide.md
```

### 3. コミット

コミットメッセージは [Conventional Commits](https://www.conventionalcommits.org/) に従ってください。

```bash
git commit -m "feat: デプロイメントガイドテンプレートを追加

- Vercel/Railway/AWSへのデプロイ手順
- ロールバック方法
- トラブルシューティング

refs #42"
```

**プレフィックス**:
- `feat:` - 新機能
- `fix:` - バグ修正
- `docs:` - ドキュメントのみの変更
- `refactor:` - リファクタリング
- `test:` - テスト追加・修正
- `chore:` - ビルドプロセス、補助ツールの変更

### 4. プッシュ

```bash
git push origin feature/add-deployment-guide
```

### 5. プルリクエスト作成

GitHub上でプルリクエストを作成します。

**プルリクエストテンプレート**:

```markdown
## 概要

デプロイメントガイドテンプレートを追加しました。

## 変更内容

- [ ] 新規テンプレート: `templates/05_operation/deployment_guide.md`
- [ ] `setup-docs.sh` 更新
- [ ] `quick-setup.sh` 更新
- [ ] `README.md` 更新（テンプレート数+1）

## 関連Issue

Closes #42

## チェックリスト

- [x] ドキュメント情報セクションが含まれている
- [x] 目次が含まれている
- [x] 変更履歴テーブルが含まれている
- [x] 小規模プロジェクト向けの内容になっている
- [x] コード例が実用的で動作する
- [x] Mermaid図の構文が正しい（該当する場合）
- [x] セットアップスクリプトを更新した
- [x] README.mdを更新した

## スクリーンショット（該当する場合）

（追加したテンプレートのプレビュー）
```

## コミットメッセージ規約

### フォーマット

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 例

```
feat(templates): プロジェクト計画テンプレートを追加

小規模プロジェクト向けのプロジェクト計画テンプレートを追加。
以下の内容を含む：
- スケジュール管理
- リソース計画
- リスク管理

refs #15
```

```
fix(setup): セットアップスクリプトのパーミッションエラーを修正

macOSで実行時に発生していたパーミッションエラーを修正。
mkdirの-pオプションを追加。

Closes #23
```

### スコープ

- `templates` - テンプレートファイル
- `scripts` - セットアップスクリプト
- `docs` - ドキュメント
- `ci` - CI/CD設定
- `examples` - サンプル・記入例

## レビュープロセス

### レビュー観点

プルリクエストは以下の観点でレビューされます：

1. **構造**
   - ドキュメント情報、目次、変更履歴が含まれているか
   - セクション構成が適切か

2. **内容**
   - 小規模プロジェクト向けか（過度に複雑でないか）
   - 実用的で即座に使える内容か
   - 技術的に正確か

3. **コード例**
   - TypeScript/JavaScript中心か
   - コピペで動作するか
   - コメントが適切か

4. **Mermaid図**
   - 構文が正しいか
   - 視覚的に分かりやすいか

5. **整合性**
   - 他のテンプレートと統一感があるか
   - セットアップスクリプトが更新されているか
   - README.mdが更新されているか

### レビュー期間

- 通常のプルリクエスト: 3-5営業日以内
- 緊急の修正（typo等）: 1-2営業日以内

### マージ条件

- [ ] CI/CDパイプラインがすべてパス
- [ ] 少なくとも1人のメンテナーから承認
- [ ] コンフリクトが解消されている
- [ ] コミットメッセージが規約に従っている

## 行動規範

### 基本原則

- 敬意を持って接する
- 建設的なフィードバックを提供する
- 多様な視点を尊重する
- コミュニティの成長を支援する

### 禁止事項

- ハラスメント行為
- 攻撃的・差別的な言動
- 個人情報の公開
- スパム行為

## よくある質問

### Q: どのテンプレートから貢献すべき？

**A:** まずは自分が実際にプロジェクトで使用して「こうあればいいのに」と思った部分から始めるのがおすすめです。小さな改善（typo修正、説明追加）も大歓迎です。

### Q: 英語版テンプレートの追加は可能？

**A:** 現在は日本語版のみですが、将来的に英語版の追加を検討しています。Issue で提案してください。

### Q: 企業向けの複雑なテンプレートは受け入れられる？

**A:** このプロジェクトは小規模プロジェクト（1-3人）向けに最適化されています。大規模プロジェクト向けテンプレートは、別のフォーク/プロジェクトとして管理することをお勧めします。

### Q: プルリクエストが却下された場合は？

**A:** フィードバックを参考に修正してください。不明点があれば、コメントで質問してください。すべてのプルリクエストには丁寧にフィードバックします。

## サポート

質問がある場合は、以下の方法で連絡してください：

- [Issue を作成](https://github.com/pon-tanuki/design-docs-for-claude-code/issues)
- [Discussions で質問](https://github.com/pon-tanuki/design-docs-for-claude-code/discussions)

---

**ありがとうございます！**
あなたの貢献がこのプロジェクトをより良いものにします。
